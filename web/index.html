<!DOCTYPE html>
<html lang="sv">

  <head>
    <link href='https://fonts.googleapis.com/css?family=Marcellus|Marcellus+SC|Raleway' rel='stylesheet'>
    <link href='style.css' rel="stylesheet">
    <script src="https://www.gstatic.com/charts/loader.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
    <title>Växthus</title>
  </head>

  <body>
    <header>Nilssons Växthus</header>
    <div class="main">
      <h1>Status</h1>
      <p>
        Vid senaste mätningen (<span class="kwarg">{datetime}</span>)
        var jordfuktigheten <span class="kwarg">{moisture}</span>%
        och lufttemperaturen <span class="kwarg">{temperature}</span> &deg;C.
      </p>
      <p>
        Gränsen för att börja vattna är <span class="kwarg">{dry_threshold}</span>%
        och gränsen för att sluta är <span class="kwarg">{wet_threshold}</span>%.
        Bevattningen går igång automatiskt om jordfuktigheten går under undre gränsen eller om det är tidigt på dagen
        (<span class="kwarg">{is_morning}</span>) och jordfuktigheten är under den övre gränsen. 
      </p>
      <h1>Historik</h1>
      <script src="app.js" defer></script>
      <div id="m_chart_div"></div>
      <div id="t_chart_div"></div>
      <a class="wrapper" href="/data/data.json" style="text-decoration: none" download>
        <button id="download_btn" class="green" type="submit"> Ladda ner data </button>
      </a>

    </div>
    <div class="side">
      <h1>Kontrollpanel</h1>
      <div>
        <p>
          Bevattningen är för närvarande <span class="kwarg">{water_on}</span>.
          Om du slår på den manuellt kommer den vara på tills fuktigheten är över den övre gränsen.
        </p>
        <form class="wrapper">
          <button class="green" type="submit" formaction="./water_on"> ON </button>
          <button class="red" type="submit" formaction="./water_off"> OFF </button>
        </form>
        <p>
          Använd fälten nedan för att ändra dessa värden.
        </p>
        <form class="wrapper">
          <div class="settings">
            <label for="wet_threshold" style="display: inline;">Övre gräns:</label>
            <input type="number" id="wet_threshold" name="wet_threshold" min="0" max="100" step="5" value="{wet_threshold}" required>
            <label for="dry_threshold" style="display: inline;">Undre gräns:</label>
            <input type="number" id="dry_threshold" name="dry_threshold" min="0" max="100" step="5" value="{dry_threshold}" required>
          </div>
          <button class="green" type="submit" formaction="./set_thresholds"> Uppdatera gränser </button>
        </form>
      </div>
    </div>
    <footer>
      <a href="https://github.com/axel-nils/pico-autowater">GitHub Repository</a>
    </footer>
  </body>

</html>
